---
import { formatDate, formatTime } from "../utils";
import { optimizeImageForThumbnail } from "../utils/imageOptimization";
import ShowDate from "./ShowDate.astro";
import ShowTime from "./ShowTime.astro";

interface Props {
  title: string;
  category: string[];
  dateTime: string;
  link: string;
  featuredImage: string;
}

const { title, category, dateTime, link, featuredImage } = Astro.props;

// Optimizar la imagen para thumbnail
const optimizedImage = optimizeImageForThumbnail(featuredImage, 400, 128);
---

<div
  class="border-2 border-lnsf-light rounded-md px-8 py-6 flex flex-col gap-4 shadow-lnsf bg-white"
>
  <div class="flex justify-between">
    <ShowDate date={formatDate(dateTime)} />
    <ShowTime time={formatTime(dateTime)} />
  </div>
  <h3 class="text-3xl md:text-4xl">{title}</h3>
  {featuredImage && (
    <div class="mt-2">
      <img 
        src={optimizedImage} 
        alt={title}
        class="w-full h-32 object-cover rounded-md"
      />
    </div>
  )}
  <div class="flex justify-between mt-auto">
    <div class="flex gap-2 items-center">
      {
        category.map((c) => {
          return (
            <p class="text-lnsf-light-text text-sm md:text-base py-1 px-2 rounded-sm bg-slate-200">
              {c}
            </p>
          );
        })
      }
    </div>
    <a
      class="bg-lnsf-blue hover:bg-lnsf-blue/80 px-4 py-2 rounded-sm shadow-xl text-white text-sm md:text-base"
      href={`/noticias/${link}`}>Leer noticia</a
    >
  </div>
</div>
