---
import EventCard from "./EventCard.astro";
import { getBlogPosts } from "../services/getBlogPosts";
import { optimizeImageForThumbnail } from "../utils/imageOptimization";

const MAX_POSTS = 3;
const blogPosts = await getBlogPosts(MAX_POSTS);
---

<img class="hidden lg:block" src="/activities_img.png" alt="" />

<div class="grid grid-cols-1 gap-2 translate-x-0 lg:-translate-x-44">
  {
    blogPosts.map((post, index) => {
      // Optimizar la imagen para thumbnail
      const optimizedImage = optimizeImageForThumbnail(post.featuredImage.url, 400, 128);
      
      return (
        <div class={index === 1 ? "translate-x-0 lg:-translate-x-14" : ""}>
          <EventCard
            title={post.title}
            category={post.category}
            dateTime={post.dateAndTime}
            link={post.slug}
            featuredImage={optimizedImage}
          />
        </div>
      );
    })
  }
</div>
